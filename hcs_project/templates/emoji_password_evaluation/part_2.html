{% extends 'emoji_password_evaluation/base.html' %}
{% load static %}
{% block body %}

<div class="container text-center mt-2">
    <h1>Part 2: Shoulder Surfer Evaluation</h1>

    <form action="{% url 'emoji_password_evaluation:submit_surfer_guesses' %}" method="POST">
        {% csrf_token %}
    
        <div class="response-form mt-3">
            <p>1. Watch the following video and try and guess the entered password:</p>

            <!-- Use {% static 'videos/vid1.mp4' %} to embed the video -->
            <video src="#" controls class="w-100"></video>

            <input type="text" name="password1" id="response-input-1" class="form-control form-control-lg" required>
            
            <div class="emoji-keyboard mt-2" data-input-target="#response-input-1">
                <button class="emoji-btn">😀</button>
                <button class="emoji-btn">😂</button>
                <button class="emoji-btn">😍</button>
                <button class="emoji-btn">😘</button>
                <button class="emoji-btn">😡</button>
                <button class="emoji-btn">🥶</button>
                <button class="emoji-btn">😎</button>
                <button class="emoji-btn">😢</button>
                <button class="emoji-btn">😠</button>
            </div>    
        </div>
    
        <div class="response-form mt-3">
            <p>2. Watch the following video and try and guess the entered password:</p>

            <!-- Use {% static 'videos/vid1.mp4' %} to embed the video -->
            <video src="#" controls class="w-100"></video>

            <input type="text" name="password2" id="response-input-2" class="form-control form-control-lg" required>
            
            <div class="emoji-keyboard mt-2" data-input-target="#response-input-2">
                <button class="emoji-btn">😀</button>
                <button class="emoji-btn">😂</button>
                <button class="emoji-btn">😍</button>
                <button class="emoji-btn">😘</button>
                <button class="emoji-btn">😡</button>
                <button class="emoji-btn">🥶</button>
                <button class="emoji-btn">😎</button>
                <button class="emoji-btn">😢</button>
                <button class="emoji-btn">😠</button>
            </div>    
        </div>
    
        <div class="response-form mt-3">
            <p>3. Watch the following video and try and guess the entered password:</p>

            <!-- Use {% static 'videos/vid1.mp4' %} to embed the video -->
            <video src="#" controls class="w-100"></video>

            <input type="text" name="password3" id="response-input-3" class="form-control form-control-lg" required>
            <div class="emoji-keyboard mt-2" data-input-target="#response-input-3">
                <button class="emoji-btn">😀</button>
                <button class="emoji-btn">😂</button>
                <button class="emoji-btn">😍</button>
                <button class="emoji-btn">😘</button>
                <button class="emoji-btn">😡</button>
                <button class="emoji-btn">🥶</button>
                <button class="emoji-btn">😎</button>
                <button class="emoji-btn">😢</button>
                <button class="emoji-btn">😠</button>
            </div>    
            
        </div>

        <div>
            <h2>  ---  </h2>
            <h2> GREAT WORK! To give the memorability test some more difficulty we're going to stop you here, for a few more minutes. Feel free to leave and come back! </h2>
        </div>

        <div id="countdown-timer" class="mt-3">
            Countdown Timer: <span id="timer">5:00</span>
        </div>

        <button type="submit" class="btn btn-success w-100 mt-1 mb-3" id="next-button" disabled>Next</button>
    </form>
    
</div>

<script>
    var timerElement = document.getElementById('timer');
    var nextButton = document.getElementById('next-button');
    var seconds = 0.5 * 60; // 5 minutes

    function updateTimer() {
        var minutes = Math.floor(seconds / 60);
        var remainingSeconds = seconds % 60;

        // Add leading zero if less than 10
        if (remainingSeconds < 10) {
            remainingSeconds = "0" + remainingSeconds;
        }

        timerElement.innerHTML = minutes + ":" + remainingSeconds;

        if (seconds <= 0) {
            clearInterval(timerInterval);
            nextButton.removeAttribute('disabled');
            timerElement.innerHTML = "Time's up!";
        } else {
            seconds--;
        }
    }

    var timerInterval = setInterval(updateTimer, 1000);
</script>

{% endblock %}